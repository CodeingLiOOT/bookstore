!function(U){"use strict";var B="ht",D=U[B],H=Math,g=H.max,u=H.min,k=H.abs,V=H.atan2,N=(H.cos,H.sin,H.ceil),Q=D.Default,E=Q.getInternal(),q=D.List,M=E.Mat,F=E.getNodeRect,W=E.intersectionLineRect,c=Q.getDistance,i=Q.setEdgeType,p="left",y="right",e="top",L="bottom",K="edge.type",s="edge.gap",b="edge.center",h="edge.extend",O=function(g,X){return F(g,X).width},X=function(A,i){return F(A,i).height},l=function(D,g){return E.getEdgeAgentPosition(D,g._40I,g.s("edge.source.position"),g.s("edge.source.offset.x"),g.s("edge.source.offset.y"),g.s("edge.source.anchor.x"),g.s("edge.source.anchor.y"))},J=function(f,V){return E.getEdgeAgentPosition(f,V._41I,V.s("edge.target.position"),V.s("edge.target.offset.x"),V.s("edge.target.offset.y"),V.s("edge.target.anchor.x"),V.s("edge.target.anchor.y"))},C=function(j,L){var P=j.s(K),$=j.getEdgeGroup();if($){var Z=0;if($.eachSiblingEdge(function(I){L.isVisible(I)&&I.s(K)==P&&Z++}),Z>1)return j.s(s)*(Z-1)/2}return 0},v=function(T,f){var I=T.s(K),$=T.isLooped();if(!T.getEdgeGroup())return $?T.s(s):0;var u,J=0,_=0,B=0;return T.getEdgeGroup().getSiblings().each(function(p){p.each(function(i){if(i._40I===T._40I&&i.s(K)==I&&f.isVisible(i)){var m=i.s(s);u?(_+=B/2+m/2,B=m):(u=i,B=m),i===T&&(J=_)}})}),$?_-J+B:J-_/2},n=function(m,k){var i=k.s("edge.corner.radius");return Q.toRoundedCorner(m,i)};E.addMethod(D.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),i("boundary",function(d,Z,S,v){v||(Z=-Z);var j,U=l(S,d),f=J(S,d),X=F(S,d._40I),Q=F(S,d._41I),T=new M(V(f.y-U.y,f.x-U.x)),g=c(U,f),O=U.x,p=U.y;return j=T.tf(0,Z),U={x:j.x+O,y:j.y+p},j=T.tf(g,Z),f={x:j.x+O,y:j.y+p},j=W(U,f,X),j&&(U={x:j[0],y:j[1]}),j=W(U,f,Q),j&&(f={x:j[0],y:j[1]}),{points:new q([U,f])}}),i("ripple",function(Y,i,D,t){t||(i=-i);var g=l(D,Y),x=J(D,Y),h=c(g,x),P=u(Y.s("edge.offset"),h/2),C=Y.s("edge.ripple.size"),E=Y.s("edge.ripple.length"),U=Y.s("edge.ripple.both"),z=Y.s(b),_=Y.s("edge.ripple.elevation"),B=new q,r=Y.s("edge.ripple.straight")?null:new q,G=new M(V(x.y-g.y,x.x-g.x));t||(_=-_),h-=2*P,E>0&&(C=N(h/E));var R=h/C;r&&r.add(1);for(var p=0;C>p;p++)r&&r.add(3),0===p?B.add({x:P+R*p,y:z?0:i}):B.add({x:P+R*p,y:i}),B.add({x:P+R*p+R/2,y:_+i}),U&&(_=-_);for(B.add({x:P+h,y:z?0:i}),p=0;p<B.size();p++){var d=G.tf(B.get(p));d.x+=g.x,d.y+=g.y,B.set(p,d)}return{points:B,segments:r}}),i("h.v",function(N,r,z){r=v(N,z);var L=new q,i=N.s(b),I=l(z,N),F=I.x,Z=I.y,$=J(z,N),S=$.x,j=$.y,a=0,R=0,D=S-F,c=j-Z;return i||(a=O(z,N._40I)/2,R=X(z,N._41I)/2),D>=0&&0>=c?(L.add({x:F+a,y:Z+r}),L.add({x:S+r,y:Z+r}),L.add({x:S+r,y:j+R})):0>=D&&c>=0?(L.add({x:F-a,y:Z+r}),L.add({x:S+r,y:Z+r}),L.add({x:S+r,y:j-R})):D>=0&&c>=0?(L.add({x:F+a,y:Z+r}),L.add({x:S-r,y:Z+r}),L.add({x:S-r,y:j-R})):(L.add({x:F-a,y:Z+r}),L.add({x:S-r,y:Z+r}),L.add({x:S-r,y:j+R})),n(L,N)}),i("v.h",function(s,g,D){g=v(s,D);var o=new q,c=s.s(b),x=l(D,s),t=x.x,G=x.y,R=J(D,s),e=R.x,j=R.y,$=0,N=0,E=e-t,F=j-G;return c||($=O(D,s._41I)/2,N=X(D,s._40I)/2),E>=0&&0>=F?(o.add({x:t+g,y:G-N}),o.add({x:t+g,y:j+g}),o.add({x:e-$,y:j+g})):0>=E&&F>=0?(o.add({x:t+g,y:G+N}),o.add({x:t+g,y:j+g}),o.add({x:e+$,y:j+g})):E>=0&&F>=0?(o.add({x:t-g,y:G+N}),o.add({x:t-g,y:j+g}),o.add({x:e-$,y:j+g})):(o.add({x:t-g,y:G-N}),o.add({x:t-g,y:j+g}),o.add({x:e+$,y:j+g})),n(o,s)}),i("ortho",function(d,p,P){var K=new q,c=d.s(b),C=d.s("edge.ortho"),N=d._40I,o=d._41I,r=l(P,d),Y=r.x,g=r.y,z=J(P,d),t=z.x,S=z.y,v=t-Y,G=S-g,y=c?0:O(P,N)/2,I=c?0:X(P,N)/2,M=c?0:O(P,o)/2,u=c?0:X(P,o)/2,h=(v-(y+M)*(v>0?1:-1))*C,B=(G-(I+u)*(G>0?1:-1))*C;return k(v)<k(G)?v>=0&&0>=G?(K.add({x:Y+p,y:g-I}),K.add({x:Y+p,y:g+B+p-I}),K.add({x:t+p,y:g+B+p-I}),K.add({x:t+p,y:S+u})):0>=v&&G>=0?(K.add({x:Y+p,y:g+I}),K.add({x:Y+p,y:g+B+p+I}),K.add({x:t+p,y:g+B+p+I}),K.add({x:t+p,y:S-u})):v>=0&&G>=0?(K.add({x:Y+p,y:g+I}),K.add({x:Y+p,y:g+B-p+I}),K.add({x:t+p,y:g+B-p+I}),K.add({x:t+p,y:S-u})):(K.add({x:Y+p,y:g-I}),K.add({x:Y+p,y:g+B-p-I}),K.add({x:t+p,y:g+B-p-I}),K.add({x:t+p,y:S+u})):v>=0&&0>=G?(K.add({x:Y+y,y:g+p}),K.add({x:Y+h+p+y,y:g+p}),K.add({x:Y+h+p+y,y:S+p}),K.add({x:t-M,y:S+p})):0>=v&&G>=0?(K.add({x:Y-y,y:g+p}),K.add({x:Y+h+p-y,y:g+p}),K.add({x:Y+h+p-y,y:S+p}),K.add({x:t+M,y:S+p})):v>=0&&G>=0?(K.add({x:Y+y,y:g+p}),K.add({x:Y+h-p+y,y:g+p}),K.add({x:Y+h-p+y,y:S+p}),K.add({x:t-M,y:S+p})):(K.add({x:Y-y,y:g+p}),K.add({x:Y+h-p-y,y:g+p}),K.add({x:Y+h-p-y,y:S+p}),K.add({x:t+M,y:S+p})),n(K,d)}),i("flex",function(g,m,d){var Z=new q,N=g.s("edge.flex")+C(g,d),B=g.s(b),z=g._40I,R=g._41I,e=l(d,g),T=e.x,U=e.y,V=J(d,g),h=V.x,P=V.y,E=h-T,Y=P-U,s=B?0:O(d,z)/2,a=B?0:X(d,z)/2,v=B?0:O(d,R)/2,r=B?0:X(d,R)/2,i=E>0?N:-N,A=Y>0?N:-N;return k(E)<k(Y)?E>=0&&0>=Y?(Z.add({x:T+m,y:U-a}),Z.add({x:T+m,y:U+A+m-a}),Z.add({x:h+m,y:P-A+m+r}),Z.add({x:h+m,y:P+r})):0>=E&&Y>=0?(Z.add({x:T+m,y:U+a}),Z.add({x:T+m,y:U+A+m+a}),Z.add({x:h+m,y:P-A+m-r}),Z.add({x:h+m,y:P-r})):E>=0&&Y>=0?(Z.add({x:T+m,y:U+a}),Z.add({x:T+m,y:U+A-m+a}),Z.add({x:h+m,y:P-A-m-r}),Z.add({x:h+m,y:P-r})):(Z.add({x:T+m,y:U-a}),Z.add({x:T+m,y:U+A-m-a}),Z.add({x:h+m,y:P-A-m+r}),Z.add({x:h+m,y:P+r})):E>=0&&0>=Y?(Z.add({x:T+s,y:U+m}),Z.add({x:T+i+m+s,y:U+m}),Z.add({x:h-i+m-v,y:P+m}),Z.add({x:h-v,y:P+m})):0>=E&&Y>=0?(Z.add({x:T-s,y:U+m}),Z.add({x:T+i+m-s,y:U+m}),Z.add({x:h-i+m+v,y:P+m}),Z.add({x:h+v,y:P+m})):E>=0&&Y>=0?(Z.add({x:T+s,y:U+m}),Z.add({x:T+i-m+s,y:U+m}),Z.add({x:h-i-m-v,y:P+m}),Z.add({x:h-v,y:P+m})):(Z.add({x:T-s,y:U+m}),Z.add({x:T+i-m-s,y:U+m}),Z.add({x:h-i-m+v,y:P+m}),Z.add({x:h+v,y:P+m})),n(Z,g)}),i("extend.east",function(H,U,r){var o=new q,i=H.s(h)+C(H,r),K=H.s(b),x=l(r,H),Y=x.x+(K?0:O(r,H._40I)/2),z=x.y,V=J(r,H),Q=V.x+(K?0:O(r,H._41I)/2),M=V.y,u=g(Y,Q)+i;return z>M?(o.add({x:Y,y:z+U}),o.add({x:u+U,y:z+U}),o.add({x:u+U,y:M-U}),o.add({x:Q,y:M-U})):(o.add({x:Y,y:z-U}),o.add({x:u+U,y:z-U}),o.add({x:u+U,y:M+U}),o.add({x:Q,y:M+U})),n(o,H)}),i("extend.west",function(Y,v,I){var G=new q,$=Y.s(h)+C(Y,I),f=Y.s(b),T=l(I,Y),t=T.x-(f?0:O(I,Y._40I)/2),P=T.y,s=J(I,Y),o=s.x-(f?0:O(I,Y._41I)/2),D=s.y,i=u(t,o)-$;return P>D?(G.add({x:t,y:P+v}),G.add({x:i-v,y:P+v}),G.add({x:i-v,y:D-v}),G.add({x:o,y:D-v})):(G.add({x:t,y:P-v}),G.add({x:i-v,y:P-v}),G.add({x:i-v,y:D+v}),G.add({x:o,y:D+v})),n(G,Y)}),i("extend.north",function(x,K,v){var O=new q,P=x.s(h)+C(x,v),H=x.s(b),p=l(v,x),L=p.x,Y=p.y-(H?0:X(v,x._40I)/2),o=J(v,x),k=o.x,i=o.y-(H?0:X(v,x._41I)/2),$=u(Y,i)-P;return L>k?(O.add({y:Y,x:L+K}),O.add({y:$-K,x:L+K}),O.add({y:$-K,x:k-K}),O.add({y:i,x:k-K})):(O.add({y:Y,x:L-K}),O.add({y:$-K,x:L-K}),O.add({y:$-K,x:k+K}),O.add({y:i,x:k+K})),n(O,x)}),i("extend.south",function(K,i,L){var O=new q,x=K.s(h)+C(K,L),A=K.s(b),S=l(L,K),t=S.x,I=S.y+(A?0:X(L,K._40I)/2),N=J(L,K),B=N.x,r=N.y+(A?0:X(L,K._41I)/2),T=g(I,r)+x;return t>B?(O.add({y:I,x:t+i}),O.add({y:T+i,x:t+i}),O.add({y:T+i,x:B-i}),O.add({y:r,x:B-i})):(O.add({y:I,x:t-i}),O.add({y:T+i,x:t-i}),O.add({y:T+i,x:B+i}),O.add({y:r,x:B+i})),n(O,K)});var A=function(h,R,w,t,$){if(t.sort(function(k,L){var T=k.getSourceAgent()===R?k.getTargetAgent():k.getSourceAgent(),v=L.getSourceAgent()===R?L.getTargetAgent():L.getSourceAgent(),a=T.p(),_=v.p();if(w===p||w===y){if(a.y>_.y)return 1;if(a.y<_.y)return-1}else{if(a.x>_.x)return 1;if(a.x<_.x)return-1}return Q.sortFunc(k.getId(),L.getId())}),$){for(var H,b,m,d=h.getSourceAgent(),W=h.getTargetAgent(),u=0;u<t.size();u++){var I=t.get(u);I.getSourceAgent()===d&&I.getTargetAgent()===W||I.getTargetAgent()===d&&I.getSourceAgent()===W?(b||(b=new q),b.add(I,0)):b?(m||(m=new q),m.add(I)):(H||(H=new q),H.add(I))}t.clear(),H&&t.addAll(H),b&&t.addAll(b),m&&t.addAll(m)}var x=t.indexOf(h),B=t.size(),r=h.s(s);return{side:w,index:x,size:B,offset:-r*(B-1)/2+r*x}},o=function(T,Y,y,q,t){var k=Y.s(K);return A(Y,y,q,y.getAgentEdges().toList(function(J){return T.isVisible(J)&&J.s(K)===k}),t)},x=function(f,g){var E=f.getSourceAgent()===g?f.getTargetAgent():f.getSourceAgent(),d=g.p(),V=E.p(),i=V.x-d.x,z=V.y-d.y;return i>0&&k(z)<=i?y:0>i&&k(z)<=-i?p:z>0&&k(i)<=z?L:e},z=function(z,q,o){var N=q.s(K),n=x(q,o);return A(q,o,n,o.getAgentEdges().toList(function(M){return z.isVisible(M)&&M.s(K)===N&&x(M,o)===n}))},T=function(o,G){var W=o.getSourceAgent()===G,U=W?o.getTargetAgent():o.getSourceAgent(),B=G.p(),D=U.p();return W?B.y>D.y?e:L:B.x<D.x?y:p},Y=function(E,V,k){var d=V.s(K),C=T(V,k);return A(V,k,C,k.getAgentEdges().toList(function(r){return E.isVisible(r)&&r.s(K)===d&&T(r,k)===C}),C===y||C===L)},t=function(E,b){var P=E.getSourceAgent()===b,Q=P?E.getTargetAgent():E.getSourceAgent(),s=b.p(),B=Q.p();return P?s.x<B.x?y:p:s.y>B.y?e:L},G=function(p,D,S){var V=D.s(K),s=t(D,S);return A(D,S,s,S.getAgentEdges().toList(function(Z){return p.isVisible(Z)&&Z.s(K)===V&&t(Z,S)===s}),s===y||s===L)},r=function(E,N,f){var A=E.getSourceAgent(),g=E.getTargetAgent(),i=A.getId()>g.getId(),V=i?g:A,d=i?A:g,Y=V.p(),s=d.p(),u=f(N,E,V),o=f(N,E,d),v=E.s(b),$=v?0:O(N,V)/2,M=v?0:O(N,d)/2,j=v?0:X(N,V)/2,Q=v?0:X(N,d)/2,K=u.offset,G=o.offset,W=u.side,z=o.side,Z=new q;return W===e?(Z.add({x:Y.x+K,y:Y.y-j}),Z.add({x:Y.x+K,y:s.y+G}),z===p?Z.add({x:s.x-M,y:s.y+G}):Z.add({x:s.x+M,y:s.y+G})):W===L?(Z.add({x:Y.x+K,y:Y.y+j}),Z.add({x:Y.x+K,y:s.y+G}),z===p?Z.add({x:s.x-M,y:s.y+G}):Z.add({x:s.x+M,y:s.y+G})):W===p?(Z.add({x:Y.x-$,y:Y.y+K}),Z.add({x:s.x+G,y:Y.y+K}),z===L?Z.add({x:s.x+G,y:s.y+Q}):Z.add({x:s.x+G,y:s.y-Q})):W===y&&(Z.add({x:Y.x+$,y:Y.y+K}),Z.add({x:s.x+G,y:Y.y+K}),z===L?Z.add({x:s.x+G,y:s.y+Q}):Z.add({x:s.x+G,y:s.y-Q})),i&&Z.reverse(),n(Z,E)};i("ortho2",function(v,B,d){var A,K,W=v.s(b),R=v.s("edge.ortho"),$=v.getSourceAgent(),U=v.getTargetAgent(),S=$.getId()>U.getId(),o=S?U:$,V=S?$:U,J=o.p(),w=V.p(),T=z(d,v,o),C=z(d,v,V),j=W?0:O(d,o)/2,_=W?0:X(d,o)/2,h=W?0:O(d,V)/2,r=W?0:X(d,V)/2,c=new q,t=T.offset,H=C.offset,m=T.side;return m===y?(A=w.y>J.y?-t:t,K=J.x+j+(w.x-h-J.x-j)*R,c.add({x:J.x+j,y:J.y+t}),c.add({x:K+A,y:J.y+t}),c.add({x:K+A,y:w.y+H}),c.add({x:w.x-h,y:w.y+H})):m===p?(A=w.y>J.y?-t:t,K=J.x-j-(J.x-j-w.x-h)*R,c.add({x:J.x-j,y:J.y+t}),c.add({x:K-A,y:J.y+t}),c.add({x:K-A,y:w.y+H}),c.add({x:w.x+h,y:w.y+H})):m===L?(A=w.x>J.x?-t:t,K=J.y+_+(w.y-r-J.y-_)*R,c.add({x:J.x+t,y:J.y+_}),c.add({x:J.x+t,y:K+A}),c.add({x:w.x+H,y:K+A}),c.add({x:w.x+H,y:w.y-r})):m===e&&(A=w.x>J.x?-t:t,K=J.y-_-(J.y-_-w.y-r)*R,c.add({x:J.x+t,y:J.y-_}),c.add({x:J.x+t,y:K-A}),c.add({x:w.x+H,y:K-A}),c.add({x:w.x+H,y:w.y+r})),S&&c.reverse(),n(c,v)},!0),i("flex2",function(j,T,R){var _,C=j.getSourceAgent(),h=j.getTargetAgent(),H=C.getId()>h.getId(),f=H?h:C,w=H?C:h,G=f.p(),D=w.p(),o=z(R,j,f),K=z(R,j,w),V=j.s(b),Q=j.s("edge.flex")+(o.size-1)/2*j.s(s),J=V?0:O(R,f)/2,d=V?0:X(R,f)/2,u=V?0:O(R,w)/2,U=V?0:X(R,w)/2,a=new q,Z=o.offset,B=K.offset,P=o.side;return P===y?(_=D.y>G.y?-Z:Z,a.add({x:G.x+J,y:G.y+Z}),a.add({x:G.x+J+Q+_,y:G.y+Z}),a.add({x:D.x-u-Q+_,y:D.y+B}),a.add({x:D.x-u,y:D.y+B})):P===p?(_=D.y>G.y?-Z:Z,a.add({x:G.x-J,y:G.y+Z}),a.add({x:G.x-J-Q-_,y:G.y+Z}),a.add({x:D.x+u+Q-_,y:D.y+B}),a.add({x:D.x+u,y:D.y+B})):P===L?(_=D.x>G.x?-Z:Z,a.add({x:G.x+Z,y:G.y+d}),a.add({x:G.x+Z,y:G.y+d+Q+_}),a.add({x:D.x+B,y:D.y-U-Q+_}),a.add({x:D.x+B,y:D.y-U})):P===e&&(_=D.x>G.x?-Z:Z,a.add({x:G.x+Z,y:G.y-d}),a.add({x:G.x+Z,y:G.y-d-Q-_}),a.add({x:D.x+B,y:D.y+U+Q-_}),a.add({x:D.x+B,y:D.y+U})),H&&a.reverse(),n(a,j)},!0),i("extend.north2",function(W,r,U){var t=W.getSourceAgent(),l=W.getTargetAgent(),g=t.getId()>l.getId(),Z=g?l:t,$=g?t:l,G=Z.p(),O=$.p(),H=o(U,W,Z,e),D=o(U,W,$,e,!0),S=W.s(b),Q=S?0:X(U,Z)/2,B=S?0:X(U,$)/2,P=H.offset,m=D.offset,y=W.s(h)+(H.size-1)/2*W.s(s),K=u(G.y-Q,O.y-B)-y+(G.x<O.x?P:-P),V=new q;return V.add({x:G.x+P,y:G.y-Q}),V.add({x:G.x+P,y:K}),V.add({x:O.x+m,y:K}),V.add({x:O.x+m,y:O.y-B}),g&&V.reverse(),n(V,W)},!0),i("extend.south2",function(d,F,U){var B=d.getSourceAgent(),e=d.getTargetAgent(),T=B.getId()>e.getId(),Q=T?e:B,Z=T?B:e,S=Q.p(),m=Z.p(),$=o(U,d,Q,L),u=o(U,d,Z,L,!0),f=d.s(b),y=f?0:X(U,Q)/2,v=f?0:X(U,Z)/2,l=$.offset,w=u.offset,R=d.s(h)+($.size-1)/2*d.s(s),I=g(S.y+y,m.y+v)+R+(S.x>m.x?l:-l),A=new q;return A.add({x:S.x+l,y:S.y+y}),A.add({x:S.x+l,y:I}),A.add({x:m.x+w,y:I}),A.add({x:m.x+w,y:m.y+v}),T&&A.reverse(),n(A,d)},!0),i("extend.west2",function(B,I,V){var t=B.getSourceAgent(),f=B.getTargetAgent(),j=t.getId()>f.getId(),H=j?f:t,U=j?t:f,X=H.p(),J=U.p(),G=o(V,B,H,e),Y=o(V,B,U,e,!0),r=B.s(b),M=r?0:O(V,H)/2,R=r?0:O(V,U)/2,S=G.offset,K=Y.offset,E=B.s(h)+(G.size-1)/2*B.s(s),c=u(X.x-M,J.x-R)-E+(X.y<J.y?S:-S),x=new q;return x.add({x:X.x-M,y:X.y+S}),x.add({x:c,y:X.y+S}),x.add({x:c,y:J.y+K}),x.add({x:J.x-R,y:J.y+K}),j&&x.reverse(),n(x,B)},!0),i("extend.east2",function(H,L,G){var N=H.getSourceAgent(),W=H.getTargetAgent(),v=N.getId()>W.getId(),E=v?W:N,u=v?N:W,x=E.p(),S=u.p(),P=o(G,H,E,e),f=o(G,H,u,e,!0),z=H.s(b),U=z?0:O(G,E)/2,m=z?0:O(G,u)/2,B=P.offset,w=f.offset,$=H.s(h)+(P.size-1)/2*H.s(s),F=g(x.x+U,S.x+m)+$+(x.y>S.y?B:-B),Z=new q;return Z.add({x:x.x+U,y:x.y+B}),Z.add({x:F,y:x.y+B}),Z.add({x:F,y:S.y+w}),Z.add({x:S.x+m,y:S.y+w}),v&&Z.reverse(),n(Z,H)},!0),i("v.h2",function(f,T,G){return r(f,G,Y)},!0),i("h.v2",function(u,i,c){return r(u,c,G)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);