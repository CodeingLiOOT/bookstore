!function(O,e,J){"use strict";var j="ht",d=O[j],A=null,U=Math,B=U.abs,N=U.max,u=Number.MAX_VALUE,V=d.Default,F=V.getInternal(),b=V.clone,c=F.vec3TransformMat4,x=F.appendArray,L=function(){var Z=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,Q=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,l=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,w=function(M,U){return U=parseInt(U),U>=0?M[U-1]:M[U+M.length]},R=function(j,t,z,g,X,O){if(j.vs){var U=w(t,g),n=w(t,X),S=w(t,O),u=z.matrix,E=j.vs;if(z.flipFace){var C=n;n=S,S=C}u?(x(E,c(b(U),u)),x(E,c(b(n),u)),x(E,c(b(S),u))):(x(E,U),x(E,n),x(E,S))}},I=function(g,u,k,J,R,O){if(g.vs){var T=w(u,J),Z=w(u,R),H=w(u,O),i=k.flipY;if(k.flipFace){var M=Z;Z=H,H=M}g.uv.push(T[0],i?1-T[1]:T[1],Z[0],i?1-Z[1]:Z[1],H[0],i?1-H[1]:H[1])}},v=function(p,n,L,V,S,F){if(p.vs){var M=w(n,V),l=w(n,S),s=w(n,F),T=L.normalMatrix,k=p.ns;if(L.flipFace){var i=l;l=s,s=i}T?(x(k,c(b(M),T)),x(k,c(b(l),T)),x(k,c(b(s),T))):(x(k,M),x(k,l),x(k,s))}},W=function(U,r,G,C,H,T,O,V){var M=C&&C.length&&V;T[3]===J?(R(U,r,H,T[0],T[1],T[2]),O&&I(U,G,H,O[0],O[1],O[2]),M&&v(U,C,H,V[0],V[1],V[2])):(R(U,r,H,T[0],T[1],T[3]),R(U,r,H,T[1],T[2],T[3]),O&&(I(U,G,H,O[0],O[1],O[3]),I(U,G,H,O[1],O[2],O[3])),M&&(v(U,C,H,V[0],V[1],V[3]),v(U,C,H,V[1],V[2],V[3])))},K=function(W,m,l,g){var q,e,A,X,$,J,G,b=u,Q=u,f=u,O=-u,t=-u,v=-u;for(q in W)for(J=W[q].vs,G=J.length,e=0;G>e;e+=3)A=J[e+0],X=J[e+1],$=J[e+2],b>A&&(b=A),Q>X&&(Q=X),f>$&&(f=$),A>O&&(O=A),X>t&&(t=X),$>v&&(v=$);if(l){var n=b+(O-b)/2,H=Q+(t-Q)/2,a=f+(v-f)/2;for(q in W)for(J=W[q].vs,G=J.length,e=0;G>e;e+=3)J[e+0]-=n,J[e+1]-=H,J[e+2]-=a}var k,y,F;l?(k=O-b,y=t-Q,F=v-f):(k=2*N(B(b),B(O)),y=2*N(B(Q),B(t)),F=2*N(B(f),B(v))),g.rawS3=[k,y,F];for(q in W){if(J=W[q].vs,m)for(G=J.length,e=0;G>e;e+=3)k&&(J[e+0]/=k),y&&(J[e+1]/=y),F&&(J[e+2]/=F);W[q].rawS3=g.rawS3}};return function(I,r,q){if(!I)return A;F.isString(r)&&(r=h(r)),q||(q={}),q.flipY==A&&(q.flipY=!0),(q.s3||q.r3||q.t3||q.mat)&&(q.matrix=F.createWorldMatrix(q.mat,q.s3,q.r3,q.rotationMode,q.t3));var O,c,o,B,S,M,T=[],E=[],e=q.ignoreNormal?A:[],U=q.reverseFlipMtls,$={vs:[],uv:[],ns:e?[]:A},f={htdefault:$},j=I.split("\n"),N=0;for(e&&q.matrix&&(q.normalMatrix=F.createNormalMatrix(q.matrix));N<j.length;N++)if(c=j[N].trim(),0!==c.length&&"#"!==c.charAt(0))if(o=Z.exec(c))T.push([parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])]);else if(o=Q.exec(c))E.push([parseFloat(o[1]),parseFloat(o[2])]);else if(e&&(o=l.exec(c)))q.flipFace?e.push([parseFloat(-o[1]),parseFloat(-o[2]),parseFloat(-o[3])]):e.push([parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])]);else if("f"===c[0]){var Y=c.split(/\s+/);if(Y.length<4)continue;var u,O,g,b=[],C=[],y=[];for(O=1,g=Y.length;g>O;O++)u=Y[O].split("/"),b.push(parseInt(u[0],10)),u.length>1&&u[1].length>0&&y.push(parseInt(u[1],10)),u.length>2&&u[2].length>0&&C.push(parseInt(u[2],10));for(O=0,g=b.length-2;g>O;O++)W($,T,E,e,q,[b[0],b[O+1],b[O+2]],y.length?[y[0],y[O+1],y[O+2]]:A,C.length?[C[0],C[O+1],C[O+2]]:A)}else if(/^usemtl /.test(c)&&(B=c.substring(7).trim(),!($=f[B]))){if($={name:B,vs:[],uv:[],ns:e?[]:A},q.ignoreMtls&&q.ignoreMtls.indexOf(B)>=0&&delete $.vs,(q.reverseFlip||"*"===U||U&&U.indexOf(B)>=0)&&($.reverseFlip=!0),r&&(S=r[B],S&&(q.ignoreColor||($.color=S.kd),!q.ignoreTransparent&&S.d>0&&S.d<1&&($.transparent=!0,$.opacity=S.d),!q.ignoreImage&&(M=S.map_kd)))){M=M.split(" ");var d=-1;for(O=0;O<M.length;O++)"-o"===M[O]?($.uvOffset=[parseFloat(M[O+1]),parseFloat(M[O+2])],O+=2,d=O):"-s"===M[O]&&($.uvScale=[parseFloat(M[O+1]),parseFloat(M[O+2])],O+=2,d=O);$.image=(q.prefix||"")+M.splice(d+1).join(" ")}f[B]=$}var J=[];for(var G in f){var m=f[G].vs;m&&0!==m.length||J.push(G)}J.forEach(function(k){delete f[k]}),K(f,q.cube,q.center,q);var z=q.shape3d;if(z){var X=[];for(var B in f){var $=f[B];X.rawS3=$.rawS3,X.push($)}V.setShape3dModel(z,X)}return f}}(),h=function(B){var S={};if(B)for(var d,z,D,H,o,V,J=B.split("\n"),N=/\s+/,u=0;u<J.length;u++)z=J[u].trim(),0!==z.length&&"#"!==z.charAt(0)&&(D=z.indexOf(" "),H=(D?z.substring(0,D):z).toLowerCase(),o=(D?z.substring(D+1):"").trim(),"newmtl"===H?S[o]=d={name:o}:d&&("ka"===H||"kd"===H||"ks"===H?(V=o.split(N,3),d[H]=[parseFloat(V[0]),parseFloat(V[1]),parseFloat(V[2]),1]):d[H]="ns"===H||"d"===H?parseFloat(o):o));return S};F.addMethod(V,{loadObj:function(O,j,W){W=W||{},V.xhrLoad(j?[O,j]:[O],function(F){var D,N=W.finishFunc,m=W.shape3d,z=F?L(F[0],F[1],W):null;if(z){if(m)D=V.getShape3dModel(m);else{D=[];for(var H in z){var p=z[H];D.rawS3=p.rawS3,D.push(p)}}N&&N(z,D,D.rawS3)}else N&&N(null)},W)},parseObj:function(c,p,W){return L(c,p,W)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);