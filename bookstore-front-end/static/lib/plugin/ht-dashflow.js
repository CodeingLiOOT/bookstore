!function(W){"use strict";var q="ht",y=W[q],A=y.Default,$=Math,T=($.PI,$.sin,$.cos,$.atan2,$.sqrt,$.max),n=$.floor,Y=($.round,$.ceil),b=y.Shape,O=(y.Edge,y.List),c=y.Style,B=y.graph,F=A.getInternal(),w=F.ui(),K=null,m="prototype",I=W.clearInterval,R=W.setInterval,C=function(v){var W=v.data,V=this.dm();if(W&&"add"===v.kind){var c=V.$1c,C=W instanceof b?"shape.":"edge.";c&&W.s(C+"dash.flow")&&c.indexOf(W)<0&&c.push(W)}"clear"===v.kind&&(V.$1c=[])},i=function(x){var V=x.property,N=x.data,P=x.newValue,B=this.dm().$1c,C=N instanceof b?"s:shape.dash.flow":"s:edge.dash.flow";if(B&&V===C)if(P)B.indexOf(N)<0&&B.push(N);else for(var Y=B.length,r=0;Y>r;r++)if(B[r]===N){B.splice(r,1);break}},u=B.GraphView[m],k=w.EdgeUI[m],t=w.ShapeUI[m],E=t._80o,L=k._80o,o=y.DataModel[m],Z=o.prepareRemove,a=u.setDataModel;c["edge.dash.flow.step"]==K&&(c["edge.dash.flow.step"]=3),c["shape.dash.flow.step"]==K&&(c["shape.dash.flow.step"]=3),o.prepareRemove=function(u){Z.call(this,u);var V=u._dataModel,o=V.$1c;if(o)for(var x=o.length,r=0;x>r;r++)if(o[r]===u){o.splice(r,1);break}},u.setDataModel=function(L){var l=this,P=l._dataModel;if(P!==L){P&&(P.umm(C,l),P.umd(i,l),P.$1c=[]),L.mm(C,l),L.md(i,l);var T=L.$1c=[];L.each(function(A){var l=A instanceof b?"shape.":"edge.";A.s(l+"dash.flow")&&T.indexOf(A)<0&&T.push(A)}),a.call(l,L)}},u.setDashFlowInterval=function(V){var N=this,h=N.$2c;N.$2c=V,N.fp("dashFlowInterval",h,V),N.$3c!=K&&(I(N.$3c),delete N.$3c,N.enableDashFlow(V))},u.getDashFlowInterval=function(){return this.$2c},u.$4c=function(){var s,L,d,r=this,B=r.tx(),M=r.ty(),D=r._zoom,u=r.getWidth(),l=r.getHeight(),h={x:-B/D,y:-M/D,width:u/D,height:l/D},W=r.dm().$1c,p=r._56I,b=new O;if(W.forEach(function(q){p[q.getId()]&&(s=r.getDataUI(q),s&&(d=s._79o(),d&&b.add(d)))}),0!==b.size()&&(b.each(function(w){A.intersectsRect(h,w)&&(L=A.unionRect(L,w))}),L&&(L&&(A.grow(L,T(1,1/D)),L.x=n(L.x*D)/D,L.y=n(L.y*D)/D,L.width=Y(L.width*D)/D,L.height=Y(L.height*D)/D,L=A.intersection(h,L)),L))){var i=r._canvas.getContext("2d");i.save(),i.lineCap=A.lineCap,i.lineJoin=A.lineJoin,F.translateAndScale(i,B,M,D),i.beginPath(),i.rect(L.x,L.y,L.width,L.height),i.clip(),i.clearRect(L.x,L.y,L.width,L.height),r.$5c(i,L),i.restore()}},u.$5c=function(q,j){var U,y,h=this;h._93db(q),h.each(function(z){h._56I[z._id]&&(U=h.getDataUI(z),U&&(y=U._79o(),(!j||A.intersectsRect(j,y))&&(U.$7c=!0,U._42(q),delete U.$7c)))}),h._92db(q)},u.enableDashFlow=function(c){var t=this;t.$3c==K&&(t.$3c=R(function(){t.$4c()},c||t.$2c||50))},u.disableDashFlow=function(){var b=this;I(b.$3c),delete b.$3c};var Q=function(){var O=this,f=O._data,c=f instanceof b?"shape.":"edge.",J=f.s(c+"dash.pattern"),P=f.s(c+"dash.flow.reverse");if(J&&f.s(c+"dash")&&f.s(c+"dash.flow")&&O.$7c){var C=O.s(c+"dash.offset")||0,S=f.s(c+"dash.flow.step"),k=f.getStyleMap(),z=0;J.forEach(function(q){z+=q}),P&&(S=-S),C-=S,C%=z,k||(f._styleMap=k={}),k[c+"dash.offset"]=C}};k._80o=function(M){L.call(this,M),Q.call(this)},t._80o=function(D){E.call(this,D),Q.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);